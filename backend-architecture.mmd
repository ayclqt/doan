graph TD
    subgraph "Backend Service"
        API[API Gateway]
        
        subgraph "Authentication"
            Auth[Authentication Service]
            Auth --> JWT[JWT Manager]
            Auth --> UserRoles[User Roles]
        end
        
        subgraph "Product Management"
            ProductService[Product Service]
            ProductService --> ProductCRUD[Product CRUD]
            ProductService --> CategoryManagement[Category Management]
            ProductService --> SearchService[Search Service]
        end
        
        subgraph "Queue System"
            RabbitMQ[RabbitMQ Broker]
            RabbitMQ --> ChatWorkers[Chat Processing Workers]
            RabbitMQ --> ProductWorkers[Product Indexing Workers]
            RabbitMQ --> LogWorkers[Logging Workers]
            
            WorkerManager[Dramatiq Worker Manager]
            WorkerManager --> WorkerPool[Worker Pool]
            WorkerManager --> RetryLogic[Retry Logic]
        end
        
        subgraph "Data Storage"
            Database[(Product/User Database)]
            Cache[(Redis Cache)]
            Logs[(Log Storage)]
        end
        
        subgraph "gRPC Client"
            CoreClient[Core Service Client]
            CoreClient --> RequestBuilder[Request Builder]
            CoreClient --> ResponseHandler[Response Handler]
        end
    end
    
    API --> Auth
    API --> ProductService
    API --> RabbitMQ
    WorkerManager --> RabbitMQ
    ChatWorkers --> CoreClient
    ProductWorkers --> CoreClient
    ProductService --> Database
    Auth --> Database
    API --> Cache
    WorkerManager --> Logs
