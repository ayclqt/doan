graph TD
    subgraph "Chuẩn bị dữ liệu"
        ProductData[(Dữ liệu sản phẩm)]
        ExtractText[Trích xuất văn bản]
        TextChunking[Chia nhỏ văn bản]
        CleanData[Làm sạch dữ liệu]
    end
    
    subgraph "Tạo và lưu trữ Embeddings"
        EmbeddingModel[Mô hình Embedding]
        ChromaCollection[ChromaDB Collection]
        MetadataStore[Lưu trữ Metadata]
    end
    
    subgraph "Truy vấn và sử dụng"
        UserQuery[Câu hỏi người dùng]
        QueryEmbedding[Tạo embedding cho câu hỏi]
        SimilaritySearch[Tìm kiếm tương đồng]
        RetrieveContext[Lấy context liên quan]
        EnhancePrompt[Bổ sung prompt cho LLM]
    end
    
    ProductData --> ExtractText
    ExtractText --> CleanData
    CleanData --> TextChunking
    
    TextChunking --> EmbeddingModel
    EmbeddingModel --> ChromaCollection
    ChromaCollection --> MetadataStore
    
    UserQuery --> QueryEmbedding
    QueryEmbedding --> SimilaritySearch
    SimilaritySearch --> ChromaCollection
    ChromaCollection --> RetrieveContext
    RetrieveContext --> EnhancePrompt
